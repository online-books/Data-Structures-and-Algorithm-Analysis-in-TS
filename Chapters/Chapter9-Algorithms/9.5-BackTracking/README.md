<!-- @format -->

## 回溯算法

> 对于某些计算问题而言，回溯法是一种可以找出所有（或一部分）解的一般性算法，尤其适用于约束补偿问题（在解决约束满足问题时，我们逐步构造更多的候选解，并且在确定某一部分候选解不可能补全成正确解之后放弃继续搜索这个部分候选解本身及其可以拓展出的子候选解，转而测试其他的部分候选解）。
>
> 回溯法采用试错的思想，它尝试分步的去解决一个问题。在分步解决问题的过程中，当它通过尝试发现现有的分步答案不能得到有效的正确的解答的时候，它将取消上一步甚至是上几步的计算，再通过其它的可能的分步解答再次尝试寻找问题的答案。回溯法通常用最简单的递归方法来实现，在反复重复上述的步骤后可能出现两种情况：a.找到一个可能存在的正确的答案；b.在尝试了所有可能的分步方法后宣告该问题没有答案。
>
> -- 摘自维基百科

回溯法相当于穷举搜索的巧妙实现，虽然性能一般不理想，但在某些情况下它比穷举法有显著的性能提升。

### 1.收费公路重建问题

给定 $N$ 个点 $p_1,p_2,\cdots,p_N$ 从左至右分布于 $x$ 轴上，$x_i$ 为 $p_i$ 的坐标且$x_1=0$。每一对点$p_i,p_j$ 之间都对应一个距离$|x_i,x_j|, (i \not ={j})$，则共有 $N(N-1)/2$ 对点产生的距离。

收费公路重建问题就是根据距离的集合重新构造或确定一个点集合的分布，即已知 $M=N(N-1)/2$ 个距离值，反解出 $N$个点的坐标。

令$D$距离是距离的集合，并设$|D|=M=N(N-1)/2$。作为例子，设
$$D=\{1,2,2,2,3,3,3,4,5,5,5,6,7,8,10\}$$

由于$|D|=15$，所以$N=6$。因为$x_1=0$，所以$x_6=10$。将$10$从$D$中删除，我们得到的点和剩下的距离如图 9-11 所示

<image  src="../../../Assets/images/ch9/9-11.png" />

图 9-11 $D=\{1,2,2,2,3,3,3,4,5,5,5,6,7,8\}$

剩下的距离中最大的是$8$，也就是说$x_2=2$或者$x_5=8$。由对称性，这两种选择都可以。我们置$x_5=8$，然后从$D$中删除距离$x_6-x_5=2$和$x_5-x_1=8$。此时，我们得到图 9-12

<image  src="../../../Assets/images/ch9/9-12.png" />

图 9-11 $D=\{1,2,2,3,3,3,4,5,5,5,6,7\}$

此时$7$是$D$中最大的数，因此$x_4=7$或$x_2=3$。如果$x_4=7$，那么$D$中就应该有$x_6-x_4=3$及$x_5-x_4=1$。如果$x_2=3$，那么$D$中应该有$x_5-x_2=5$及$x_2-x_1=3$。而这两种情况也确实满足，我们尝试其中一种看是否能求出问题的解。如果不行那就退回来再尝试另外的一个解。我们置$x_4=7$，得到图 9-13

<image  src="../../../Assets/images/ch9/9-13.png" />

图 9-13 $D=\{2,2,3,3,4,5,5,5,6,7\}$

此时，我们得到$x_1=0,x_4=7,x_5=8,x_6=10$。现在最大距离为$6$，因此$x_3=6$或者$x_2=4$。如果$x_3=6$，则$x_4-x_3=1$，但此时$D$中不包含$1$。另外，如果$x_2=4$，那么$x_2-x_1=4$和$x_5-x_2=4$，这也是不可能的。因此我们回溯到$x_4=7$，此情况不成立。

我们继续尝试$x_2=3$，得到图 9-14

<image  src="../../../Assets/images/ch9/9-14.png" />

图 9-14 $D=\{1,2,2,3,3,4,5,5,6\}$

此时，我们得到$x_4=6$或者$x_3=4$。但$x_3=4$不成立，因为$x_3-x_1=4$，而$D$中只有一个$4$。所以置$x_4=6$，得到图 9-15

<image  src="../../../Assets/images/ch9/9-15.png" />

图 9-15 $D=\{1,2,3,5,5\}$

剩下唯一的选择是$x_3=5$，此时$D$为空集，我们得到问题的解。

<image  src="../../../Assets/images/ch9/9-16.png" />

图 9-16 $D=\{\}$

### 2.博弈

待更新

### 代码位置

[SourceCode/Algorithms/BackTracking/Turnpike.ts](/SourceCode/Algorithms/BackTracking/Turnpike.ts)
